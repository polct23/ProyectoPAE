{
    "id":null,
    "uid":"movere-dashboard",
    "title":"Movere",
    "tags":[
       "movere"
    ],
    "timezone":"browser",
    "editable":true,
    "graphTooltip":1,
    "panels":[
       {
          "type":"barchart",
          "title":"Distribución de usuarios por roles",
          "datasource":"Movere",
          "targets":[
             {
                "type":"json",
                "source":"url",
                "url":"/countRoles",
                "url_options":{
                   "method":"GET"
                },
                "format":"table",
                "root_selector":"",
                "columns":[
                   {
                      "selector":"label",
                      "text":"Rol",
                      "type":"string"
                   },
                   {
                      "selector":"value",
                      "text":"Número de usuarios",
                      "type":"number"
                   }
                ]
             }
          ],
          "options":{
             "orientation":"vertical",
             "barWidth":0.7,
             "groupWidth":0.8,
             "legend":{
                "displayMode":"list",
                "placement":"bottom"
             },
             "reduceOptions":{
                "calculation":"allValues",
                "fields":"numeric"
             }
          },
          "fieldConfig":{
             "defaults":{
                "unit":"short",
                "custom":{
                   "calcs":[
                      "allValues"
                   ],
                   "displayMode":"allValues"
                },
                "color": {
            "mode": "fixed",
            "fixedColor": "#8083BA"
        }
             }
          },
          "gridPos":{
             "h":8,
             "w":12,
             "x":0,
             "y":0
          }
       },
       {
        "type": "stat",
        "title": "Usuarios PAS activos en último mes",
        "datasource": "Movere",
        "targets": [
            {
                "type": "json",
                "source": "url",
                "url": "/countActivePAS",
                "url_options": {
                    "method": "GET"
                },
                "format": "table",
                "root_selector": "",
                "columns": [
                    { "selector": "label", "text": "Categoría", "type": "string" },
                    { "selector": "value", "text": "Cantidad", "type": "number" }
                ]
            }
        ],
        "options": {
            "colorMode": "value",
            "graphMode": "none",
            "justifyMode": "center",
            "orientation": "vertical",
            "percentChangeColorMode": "standard",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "calculation": "allValues",
              "fields": "Cantidad",
              "values": true
            },
            "showPercentChange": false,
            "textMode": "value_and_name",
            "wideLayout": true
          },
          "fieldConfig": {
            "defaults": {
                "color": {
            "mode": "fixed",
            "fixedColor": "#8083BA"
        },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "yellow",
                    "value": 3
                  },
                  {
                    "color": "red",
                    "value": 10
                  }
                ]
              },
              "unit": "short"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 0
          }
        },
        {
            "type": "timeseries",
            "title": "Número de respuestas totales por día en los últimos 90 días",
            "datasource": "Movere",
            "targets": [
                {
                    "type": "json",
                    "source": "url",
                    "url": "/formCalendar",
                    "url_options": {
                        "method": "GET"
                    },
                    "format": "table",
                    "root_selector": "",
                    "columns": [
                        { "selector": "date", "text": "Fecha", "type": "time" },
                        { "selector": "value", "text": "Número de respuestas", "type": "number" }
                    ]
                }
            ],
            "options": {
                "tooltip": {
                    "mode": "all"
                },
                "legend": {
                    "displayMode": "list",
                    "placement": "bottom"
                },
                "series": {
                    "showPoints": "auto",
                    "spanNulls": true
                },
    "xAxis": {
        "mode": "time",
        "timeFormats": {
            "millisecond": "HH:mm:ss.SSS",
            "second": "HH:mm:ss",
            "minute": "HH:mm",
            "hour": "HH:mm",
            "day": "YYYY-MM-DD",
            "month": "YYYY-MM",
            "year": "YYYY"
        },
        "minStep": "1d",
        "label": "Fecha"
    }
    
            },
            "fieldConfig": {
                "defaults": {
                    "color": {
                "mode": "fixed",
                "fixedColor": "#8083BA"
            }
                }
            },
            "gridPos": {
                "h": 8,
                "w": 12,
                "x": 0,
                "y": 8
            }
        },
        {
            "type": "timeseries",
            "title": "Respuestas totales por día clasificadas por tipo de formulario en los últimos 90 días",
            "datasource": "Movere",
            "targets": [
                {
                    "type": "json",
                    "source": "url",
                    "url": "/responsesByFormType",
                    "url_options": {
                        "method": "GET"
                    },
                    "format": "table",
                    "root_selector": "",
                    "columns": [
                        { "selector": "date", "text": "Fecha", "type": "time" },
                        { "selector": "SIMPLE", "text": "Formulario Simple", "type": "number" },
                        { "selector": "EXTENDED", "text": "Formulario Extendido", "type": "number" }
                    ]
                }
            ],
            "options": {
                "legend": {
                    "displayMode": "table",
                    "placement": "bottom",
                    "calcs": ["sum"]
                },
                "series": {
                    "showPoints": "auto",
                    "spanNulls": true
                },
                "tooltip": {
                    "mode": "all",
                    "sort": "none"
                },
                "xAxis": {
                    "label": "Fecha",
                    "minStep": "1d",
                    "mode": "time",
                    "timeFormats": {
                        "day": "YYYY-MM-DD",
                        "hour": "HH:mm",
                        "millisecond": "HH:mm:ss.SSS",
                        "minute": "HH:mm",
                        "month": "YYYY-MM",
                        "second": "HH:mm:ss",
                        "year": "YYYY"
                    }
                }
            },
            "fieldConfig": {
                "defaults": {
                    "color": {
                        "mode": "palette-classic"
                    }
                }
            },
            "gridPos": {
                "h": 8,
                "w": 12,
                "x": 12,
                "y": 8
            }
        },
        {
            "type": "timeseries",
            "title": "Respuestas por día clasificadas por equipos en los últimos 90 días",
            "datasource": "Movere",
            "targets": [
                {
                    "type": "json",
                    "source": "url",
                    "url": "/responsesByTeam",
                    "url_options": {
                        "method": "GET"
                    },
                    "format": "table",
                    "root_selector": "",
                    "columns": [
                        { "selector": "date", "text": "Fecha", "type": "time" },
                        { "selector": "Equip3 - BCN", "text": "Equip3 - BCN", "type": "number" },
                        { "selector": "Equip4 - BCN", "text": "Equip4 - BCN", "type": "number" },
                        { "selector": "Equip5 - BCN", "text": "Equip5 - BCN", "type": "number" },
                        { "selector": "Equip6 - BCN", "text": "Equip6 - BCN", "type": "number" },
                        { "selector": "Equip7 - BCN", "text": "Equip7 - BCN", "type": "number" },
                        { "selector": "GRUP 0 - PROVES", "text": "GRUP 0 - PROVES", "type": "number" },
                        { "selector": "GRUP 1 - BCN", "text": "GRUP 1 - BCN", "type": "number" },
                        { "selector": "GRUP 2 - BCN", "text": "GRUP 2 - BCN", "type": "number" },
                        { "selector": "GRUP-PROVES-ALTERAID", "text": "GRUP-PROVES-ALTERAID", "type": "number" }
                    ]
                }
            ],
            "options": {
                "legend": {
                    "displayMode": "table",
                    "placement": "bottom",
                    "calcs": ["sum"]
                },
                "series": {
                    "showPoints": "auto",
                    "spanNulls": true
                },
                "tooltip": {
                    "mode": "all",
                    "sort": "none"
                },
                "xAxis": {
                    "label": "Fecha",
                    "minStep": "1d",
                    "mode": "time",
                    "timeFormats": {
                        "day": "YYYY-MM-DD",
                        "hour": "HH:mm",
                        "millisecond": "HH:mm:ss.SSS",
                        "minute": "HH:mm",
                        "month": "YYYY-MM",
                        "second": "HH:mm:ss",
                        "year": "YYYY"
                    }
                }
            },
            "fieldConfig": {
                "defaults": {
                }
            },
            "gridPos": {
                "h": 8,
                "w": 12,
                "x": 0,
                "y": 16
            }
        },
        {
            "type": "barchart",
            "title": "Número de videos por categoría",
            "datasource": "Movere",
            "targets": [
                {
                    "type": "json",
                    "source": "url",
                    "url": "/videosByCategory",
                    "url_options": {
                        "method": "GET"
                    },
                    "format": "table",
                    "root_selector": "",
                    "columns": [
                        { "selector": "category", "text": "Categoría", "type": "string" },
                        { "selector": "value", "text": "Número de Videos", "type": "number" }
                    ]
                }
            ],
            "options": {
                "orientation": "vertical",
                "barWidth": 0.7,
                "groupWidth": 0.8,
                "legend": {
                    "displayMode": "list",
                    "placement": "bottom"
                },
                "reduceOptions": {
                    "calculation": "allValues",
                    "fields": "numeric"
                }
            },
            "fieldConfig": {
                "defaults": {
                    "unit": "short",
                    "custom": {
                        "calcs": ["allValues"],
                        "displayMode": "allValues"
                    },
                    "color": {
                "mode": "fixed",
                "fixedColor": "#8083BA"
            }
                }
            },
            "gridPos": {
                "h": 8,
                "w": 12,
                "x": 12,
                "y": 16
            }
        },  
        {
            "type": "barchart",
            "title": "Actividades disponibles por mes",
            "datasource": "Movere",
            "targets": [
              {
                "type": "json",
                "source": "url",
                "url": "/activitiesByMonth",
                "url_options": {
                  "method": "GET"
                },
                "format": "table",
                "root_selector": "",
                "columns": [
                  { "selector": "date", "text": "Fecha", "type": "time" },
                  { "selector": "value", "text": "Número de Actividades", "type": "number" }
                ]
              }
            ],
            "options": {
              "orientation": "vertical",
              "barWidth": 0.7,
              "groupWidth": 0.8,
              "legend": {
                "displayMode": "list",
                "placement": "bottom"
              },
              "reduceOptions": {
                "calculation": "allValues",
                "fields": "numeric"
              },
              "tooltip": {
                "mode": "all"
              }
            },
            "fieldConfig": {
              "defaults": {
                "unit": "short",
                "custom": {
                  "calcs": ["allValues"],
                  "displayMode": "allValues"
                },
                "color": {
            "mode": "fixed",
            "fixedColor": "#8083BA"
        }
              }
            },
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 24
            }
          },
          {
            "type": "barchart",
            "title": "Equipos y su número de PaS",
            "datasource": "Movere",
            "targets": [
                {
                    "type": "json",
                    "source": "url",
                    "url": "/countPASPerTeam",
                    "url_options": {
                        "method": "GET"
                    },
                    "format": "table",
                    "root_selector": "",
                    "columns": [
                        { "selector": "team", "text": "Equipo", "type": "string" },
                        { "selector": "value", "text": "Número de PAS", "type": "number" }
                    ]
                }
            ],
            "options": {
                "orientation": "horizontal",
                "barWidth": 0.7,
                "groupWidth": 0.8,
                "legend": {
                    "displayMode": "list",
                    "placement": "bottom"
                },
                "reduceOptions": {
                    "calculation": "allValues",
                    "fields": "numeric"
                }
            },
            "fieldConfig": {
                "defaults": {
                    "unit": "short",
                    "custom": {
                        "calcs": ["allValues"],
                        "displayMode": "allValues"
                    },
                    "color": {
                "mode": "fixed",
                "fixedColor": "#8083BA"
            }
                }
            },
            "gridPos": {
                "h": 8,
                "w": 12,
                "x": 12,
                "y": 24
            }
        },
        {
          "type": "barchart",
          "title": "Top 10 Actividades con más gente apuntada",
          "datasource": "Movere",
          "targets": [
              {
                  "type": "json",
                  "source": "url",
                  "url": "/top10Activities",
                  "url_options": {
                      "method": "GET"
                  },
                  "format": "table",
                  "root_selector": "",
                  "columns": [
                      { "selector": "activity", "text": "Actividad", "type": "string" },
                      { "selector": "value", "text": "Número de personas Inscritas", "type": "number" }
                  ]
              }
          ],
          "options": {
              "orientation": "horizontal",
              "barWidth": 0.7,
              "groupWidth": 0.8,
              "legend": {
                  "displayMode": "list",
                  "placement": "bottom"
              },
              "reduceOptions": {
                  "calculation": "allValues",
                  "fields": "numeric"
              }
          },
          "fieldConfig": {
              "defaults": {
                  "unit": "short",
                  "custom": {
                      "calcs": ["allValues"],
                      "displayMode": "allValues"
                  },
                  "color": {
              "mode": "fixed",
              "fixedColor": "#8083BA"
          }
              }
          },
          "gridPos": {
              "h": 8,
              "w": 24,
              "x": 0,
              "y": 32
          }
      },
      {
        "type": "barchart",
        "title": "Top 10 Actividades que más se han guardado en Favoritos",
        "datasource": "Movere",
        "targets": [
            {
                "type": "json",
                "source": "url",
                "url": "/top10FavoriteActivities",
                "url_options": {
                    "method": "GET"
                },
                "format": "table",
                "root_selector": "",
                "columns": [
                    { "selector": "activity", "text": "Actividad", "type": "string" },
                    { "selector": "value", "text": "Veces en Favoritos", "type": "number" }
                ]
            }
        ],
        "options": {
            "orientation": "horizontal",
            "barWidth": 0.7,
            "groupWidth": 0.8,
            "legend": {
                "displayMode": "list",
                "placement": "bottom"
            },
            "reduceOptions": {
                "calculation": "allValues",
                "fields": "numeric"
            }
        },
        "fieldConfig": {
            "defaults": {
                "unit": "short",
                "custom": {
                    "calcs": ["allValues"],
                    "displayMode": "allValues"
                },
                "color": {
            "mode": "fixed",
            "fixedColor": "#8083BA"
        }
            }
        },
        "gridPos": {
            "h": 8,
            "w": 24,
            "x": 0,
            "y": 40
        }
    },
  {
    "title": "Mapa de Actividades",
    "type": "geomap",
    "datasource": "Movere",
    "targets": [
        {
            "type": "json",
            "source": "url",
            "url": "/activitiesGeoData",
            "url_options": {
                "method": "GET"
            },
            "format": "table",
            "root_selector": "",
            "columns": [
                { "selector": "latitude", "text": "Latitud", "type": "number" },
                { "selector": "longitude", "text": "Longitud", "type": "number" },
                { "selector": "title", "text": "Actividad", "type": "string" },
                { "selector": "address", "text": "Dirección", "type": "string" },
                { "selector": "city", "text": "Ciudad", "type": "string" },
                { "selector": "type", "text": "Tipo", "type": "string" }
            ],
            "filters": []
        }
    ],
    "options": {
        "baseMap": {
            "mode": "default"
        },
        "basemap": {
            "config": {
                "server": "streets",
                "showLabels": true,
                "theme": "auto"
            },
            "name": "Actividades",
            "type": "default"
        },
        "controls": {
            "mouseWheelZoom": true,
            "showAttribution": true,
            "showDebug": false,
            "showMeasure": false,
            "showScale": false,
            "showZoom": true
        },
        "layers": [
            {
                "type": "markers",
                "name": "Actividades",
                "config": {
                    "color": "red",
                    "radius": 5,
                    "style": {
                        "symbol": {
                            "fixed": "img/icons/marker/circle.svg",
                            "mode": "fixed"
                        }
                    },
                    "tooltip": {
                        "mode": "all",
                        "content": [
                            "Actividad: {{title}}",
                            "Dirección: {{address}}",
                            "Ciudad: {{city}}",
                            "Categoría: {{type}}"
                        ]
                    }
                },
                "filterData": {
                    "id": "byRefId",
                    "options": "A"
                },
                "location": {
                    "latitude": "Latitud",
                    "longitude": "Longitud",
                    "mode": "coords"
                }
            }
        ],
        "tooltip": {
            "mode": "details"
        },
        "view": {
            "autoFit": false,
            "allLayers": true,
            "id": "coords",
            "lastOnly": false,
            "lat": 41.3851,
            "lon": 2.1734,
            "maxZoom": 18,
            "mode": "auto",
            "padding": 40,
            "zoom": 11
        },
        "fieldConfig": {
        "defaults": {
            "unit": "none",
            "decimals": 6
        }
        }
    },
    "gridPos": {
        "h": 12,
        "w": 24,
        "x": 0,
        "y": 48
    }     
},
{
    "type": "barchart",
    "title": "Ranking de Puntos por Categoría",
    "gridPos": {
      "h": 9,
      "w": 24,
      "x": 0,
      "y": 60
    },
    "id": 1,
    "datasource": "Movere",
    "targets": [
      {
        "type": "json",
        "source": "url",
        "url": "/rankingsGrafanaTop10",
        "url_options": {
          "method": "GET"
        },
        "format": "json",
        "root_selector": "",
        "columns": [
          { "selector": "user", "text": "Usuario", "type": "string" },
          { "selector": "scoreTotal", "text": "Puntos totales", "type": "number" },
          { "selector": "scoreActivity", "text": "Puntos actividades", "type": "number" },
          { "selector": "scoreSurvey", "text": "Puntos formularios", "type": "number" },
          { "selector": "scoreVideo", "text": "Puntos videos", "type": "number" },
          { "selector": "scoreGame", "text": "Puntos juegos", "type": "number" }
        ]
      }
    ],
    "options": {
      "orientation": "vertical",
      "categoryField": "user",
      "valueField": "score"
    },
    "fieldConfig": {
      "defaults": {
        "unit": "short"
      }
    },
    "legend": {
      "show": true
    }
  }  
    ],
    "templating": {
    "list": []
    },
    "time": {
        "from": "now-90d",
        "to": "now"
      },
    "annotations":{
       "list":[
          
       ]
    },
    "timepicker":{
       "hidden":false
    },
    "refresh":"30m",
    "schemaVersion":17,
    "version":1,
    "links":[
       
    ]
 }